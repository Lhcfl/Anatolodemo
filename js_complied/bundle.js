function _array_like_to_array(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _array_without_holes(arr){if(Array.isArray(arr))return _array_like_to_array(arr)}function _assert_this_initialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _call_super(_this,derived,args){derived=_get_prototype_of(derived);return _possible_constructor_return(_this,_is_native_reflect_construct()?Reflect.construct(derived,args||[],_get_prototype_of(_this).constructor):derived.apply(_this,args))}function _class_call_check(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _construct(Parent,args,Class){if(_is_native_reflect_construct()){_construct=Reflect.construct}else{_construct=function construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_set_prototype_of(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _define_property(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _get_prototype_of(o){_get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _get_prototype_of(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_set_prototype_of(subClass,superClass)}function _instanceof(left,right){if(right!=null&&typeof Symbol!=="undefined"&&right[Symbol.hasInstance]){return!!right[Symbol.hasInstance](left)}else{return left instanceof right}}function _is_native_function(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _iterable_to_array(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _iterable_to_array_limit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})}keys.push.apply(keys,symbols)}return keys}function _object_spread_props(target,source){source=source!=null?source:{};if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _possible_constructor_return(self,call){if(call&&(_type_of(call)==="object"||typeof call==="function")){return call}return _assert_this_initialized(self)}function _set_prototype_of(o,p){_set_prototype_of=Object.setPrototypeOf||function setPrototypeOf(o,p){o.__proto__=p;return o};return _set_prototype_of(o,p)}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _to_array(arr){return _array_with_holes(arr)||_iterable_to_array(arr)||_unsupported_iterable_to_array(arr)||_non_iterable_rest()}function _to_consumable_array(arr){return _array_without_holes(arr)||_iterable_to_array(arr)||_unsupported_iterable_to_array(arr)||_non_iterable_spread()}function _type_of(obj){"@swc/helpers - typeof";return obj&&typeof Symbol!=="undefined"&&obj.constructor===Symbol?"symbol":typeof obj}function _unsupported_iterable_to_array(o,minLen){if(!o)return;if(typeof o==="string")return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}function _wrap_native_super(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrap_native_super=function wrapNativeSuper(Class){if(Class===null||!_is_native_function(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_get_prototype_of(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _set_prototype_of(Wrapper,Class)};return _wrap_native_super(Class)}function _is_native_reflect_construct(){try{var result=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(_){}return(_is_native_reflect_construct=function(){return!!result})()}function _ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),"throw":verb(1),"return":verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}}(function(factory){typeof define==="function"&&define.amd?define(factory):factory()})(function(){"use strict";function isArray(value){return!Array.isArray?getTag(value)==="[object Array]":Array.isArray(value)}var INFINITY=1/0;function baseToString(value){if(typeof value=="string"){return value}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function toString(value){return value==null?"":baseToString(value)}function isString(value){return typeof value==="string"}function isNumber(value){return typeof value==="number"}function isBoolean(value){return value===true||value===false||isObjectLike(value)&&getTag(value)=="[object Boolean]"}function isObject(value){return(typeof value==="undefined"?"undefined":_type_of(value))==="object"}function isObjectLike(value){return isObject(value)&&value!==null}function isDefined(value){return value!==undefined&&value!==null}function isBlank(value){return!value.trim().length}function getTag(value){return value==null?value===undefined?"[object Undefined]":"[object Null]":Object.prototype.toString.call(value)}var EXTENDED_SEARCH_UNAVAILABLE="Extended search is not available";var INCORRECT_INDEX_TYPE="Incorrect 'index' type";var LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY=function(key){return"Invalid value for key ".concat(key)};var PATTERN_LENGTH_TOO_LARGE=function(max){return"Pattern length exceeds max of ".concat(max,".")};var MISSING_KEY_PROPERTY=function(name){return"Missing ".concat(name," property in key")};var INVALID_KEY_WEIGHT_VALUE=function(key){return"Property 'weight' in key '".concat(key,"' must be a positive integer")};var hasOwn=Object.prototype.hasOwnProperty;var KeyStore=/*#__PURE__*/function(){function KeyStore(keys){var _this=this;_class_call_check(this,KeyStore);this._keys=[];this._keyMap={};var totalWeight=0;keys.forEach(function(key){var obj=createKey(key);_this._keys.push(obj);_this._keyMap[obj.id]=obj;totalWeight+=obj.weight});this._keys.forEach(function(key){key.weight/=totalWeight})}_create_class(KeyStore,[{key:"get",value:function get(keyId){return this._keyMap[keyId]}},{key:"keys",value:function keys(){return this._keys}},{key:"toJSON",value:function toJSON(){return JSON.stringify(this._keys)}}]);return KeyStore}();function createKey(key){var path=null;var id=null;var src=null;var weight=1;var getFn=null;if(isString(key)||isArray(key)){src=key;path=createKeyPath(key);id=createKeyId(key)}else{if(!hasOwn.call(key,"name")){throw new Error(MISSING_KEY_PROPERTY("name"))}var name=key.name;src=name;if(hasOwn.call(key,"weight")){weight=key.weight;if(weight<=0){throw new Error(INVALID_KEY_WEIGHT_VALUE(name))}}path=createKeyPath(name);id=createKeyId(name);getFn=key.getFn}return{path:path,id:id,weight:weight,src:src,getFn:getFn}}function createKeyPath(key){return isArray(key)?key:key.split(".")}function createKeyId(key){return isArray(key)?key.join("."):key}function get(obj,path){var list=[];var arr=false;var deepGet=function(obj,path,index){if(!isDefined(obj)){return}if(!path[index]){list.push(obj)}else{var key=path[index];var value=obj[key];if(!isDefined(value)){return}if(index===path.length-1&&(isString(value)||isNumber(value)||isBoolean(value))){list.push(toString(value))}else if(isArray(value)){arr=true;for(var i=0,len=value.length;i<len;i+=1){deepGet(value[i],path,index+1)}}else if(path.length){deepGet(value,path,index+1)}}};deepGet(obj,isString(path)?path.split("."):path,0);return arr?list:list[0]}var MatchOptions={includeMatches:false,findAllMatches:false,minMatchCharLength:1};var BasicOptions={isCaseSensitive:false,includeScore:false,keys:[],shouldSort:true,sortFn:function(a,b){return a.score===b.score?a.idx<b.idx?-1:1:a.score<b.score?-1:1}};var FuzzyOptions={location:0,threshold:.6,distance:100};var AdvancedOptions={useExtendedSearch:false,getFn:get,ignoreLocation:false,ignoreFieldNorm:false,fieldNormWeight:1};var Config=_object_spread({},BasicOptions,MatchOptions,FuzzyOptions,AdvancedOptions);var SPACE=/[^ ]+/g;function norm(){var weight=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,mantissa=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;var cache=new Map;var m=Math.pow(10,mantissa);return{get:function get(value){var numTokens=value.match(SPACE).length;if(cache.has(numTokens)){return cache.get(numTokens)}var norm=1/Math.pow(numTokens,.5*weight);var n=parseFloat(Math.round(norm*m)/m);cache.set(numTokens,n);return n},clear:function clear(){cache.clear()}}}var FuseIndex=/*#__PURE__*/function(){function FuseIndex(){var _ref=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_ref_getFn=_ref.getFn,getFn=_ref_getFn===void 0?Config.getFn:_ref_getFn,_ref_fieldNormWeight=_ref.fieldNormWeight,fieldNormWeight=_ref_fieldNormWeight===void 0?Config.fieldNormWeight:_ref_fieldNormWeight;_class_call_check(this,FuseIndex);this.norm=norm(fieldNormWeight,3);this.getFn=getFn;this.isCreated=false;this.setIndexRecords()}_create_class(FuseIndex,[{key:"setSources",value:function setSources(){var docs=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.docs=docs}},{key:"setIndexRecords",value:function setIndexRecords(){var records=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.records=records}},{key:"setKeys",value:function setKeys(){var _this=this;var keys=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.keys=keys;this._keysMap={};keys.forEach(function(key,idx){_this._keysMap[key.id]=idx})}},{key:"create",value:function create(){var _this=this;if(this.isCreated||!this.docs.length){return}this.isCreated=true;if(isString(this.docs[0])){this.docs.forEach(function(doc,docIndex){_this._addString(doc,docIndex)})}else{this.docs.forEach(function(doc,docIndex){_this._addObject(doc,docIndex)})}this.norm.clear()}},{key:"add",value:function add(doc){var idx=this.size();if(isString(doc)){this._addString(doc,idx)}else{this._addObject(doc,idx)}}},{key:"removeAt",value:function removeAt(idx){this.records.splice(idx,1);for(var i=idx,len=this.size();i<len;i+=1){this.records[i].i-=1}}},{key:"getValueForItemAtKeyId",value:function getValueForItemAtKeyId(item,keyId){return item[this._keysMap[keyId]]}},{key:"size",value:function size(){return this.records.length}},{key:"_addString",value:function _addString(doc,docIndex){if(!isDefined(doc)||isBlank(doc)){return}var record={v:doc,i:docIndex,n:this.norm.get(doc)};this.records.push(record)}},{key:"_addObject",value:function _addObject(doc,docIndex){var _this=this;var record={i:docIndex,$:{}};this.keys.forEach(function(key,keyIndex){var value=key.getFn?key.getFn(doc):_this.getFn(doc,key.path);if(!isDefined(value)){return}if(isArray(value)){var subRecords=[];var stack=[{nestedArrIndex:-1,value:value}];while(stack.length){var _stack_pop=stack.pop(),nestedArrIndex=_stack_pop.nestedArrIndex,value1=_stack_pop.value;if(!isDefined(value1)){continue}if(isString(value1)&&!isBlank(value1)){var subRecord={v:value1,i:nestedArrIndex,n:_this.norm.get(value1)};subRecords.push(subRecord)}else if(isArray(value1)){value1.forEach(function(item,k){stack.push({nestedArrIndex:k,value:item})})}else;}record.$[keyIndex]=subRecords}else if(isString(value)&&!isBlank(value)){var subRecord1={v:value,n:_this.norm.get(value)};record.$[keyIndex]=subRecord1}});this.records.push(record)}},{key:"toJSON",value:function toJSON(){return{keys:this.keys,records:this.records}}}]);return FuseIndex}();function createIndex(keys,docs){var _ref=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_ref_getFn=_ref.getFn,getFn=_ref_getFn===void 0?Config.getFn:_ref_getFn,_ref_fieldNormWeight=_ref.fieldNormWeight,fieldNormWeight=_ref_fieldNormWeight===void 0?Config.fieldNormWeight:_ref_fieldNormWeight;var myIndex=new FuseIndex({getFn:getFn,fieldNormWeight:fieldNormWeight});myIndex.setKeys(keys.map(createKey));myIndex.setSources(docs);myIndex.create();return myIndex}function parseIndex(data){var _ref=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_ref_getFn=_ref.getFn,getFn=_ref_getFn===void 0?Config.getFn:_ref_getFn,_ref_fieldNormWeight=_ref.fieldNormWeight,fieldNormWeight=_ref_fieldNormWeight===void 0?Config.fieldNormWeight:_ref_fieldNormWeight;var keys=data.keys,records=data.records;var myIndex=new FuseIndex({getFn:getFn,fieldNormWeight:fieldNormWeight});myIndex.setKeys(keys);myIndex.setIndexRecords(records);return myIndex}function computeScore$1(pattern){var _ref=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_ref_errors=_ref.errors,errors=_ref_errors===void 0?0:_ref_errors,_ref_currentLocation=_ref.currentLocation,currentLocation=_ref_currentLocation===void 0?0:_ref_currentLocation,_ref_expectedLocation=_ref.expectedLocation,expectedLocation=_ref_expectedLocation===void 0?0:_ref_expectedLocation,_ref_distance=_ref.distance,distance=_ref_distance===void 0?Config.distance:_ref_distance,_ref_ignoreLocation=_ref.ignoreLocation,ignoreLocation=_ref_ignoreLocation===void 0?Config.ignoreLocation:_ref_ignoreLocation;var accuracy=errors/pattern.length;if(ignoreLocation){return accuracy}var proximity=Math.abs(expectedLocation-currentLocation);if(!distance){return proximity?1:accuracy}return accuracy+proximity/distance}function convertMaskToIndices(){var matchmask=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],minMatchCharLength=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Config.minMatchCharLength;var indices=[];var start=-1;var end=-1;var i=0;for(var len=matchmask.length;i<len;i+=1){var match=matchmask[i];if(match&&start===-1){start=i}else if(!match&&start!==-1){end=i-1;if(end-start+1>=minMatchCharLength){indices.push([start,end])}start=-1}}if(matchmask[i-1]&&i-start>=minMatchCharLength){indices.push([start,i-1])}return indices}var MAX_BITS=32;function search(text,pattern,patternAlphabet){var _ref=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},_ref_location=_ref.location,location=_ref_location===void 0?Config.location:_ref_location,_ref_distance=_ref.distance,distance=_ref_distance===void 0?Config.distance:_ref_distance,_ref_threshold=_ref.threshold,threshold=_ref_threshold===void 0?Config.threshold:_ref_threshold,_ref_findAllMatches=_ref.findAllMatches,findAllMatches=_ref_findAllMatches===void 0?Config.findAllMatches:_ref_findAllMatches,_ref_minMatchCharLength=_ref.minMatchCharLength,minMatchCharLength=_ref_minMatchCharLength===void 0?Config.minMatchCharLength:_ref_minMatchCharLength,_ref_includeMatches=_ref.includeMatches,includeMatches=_ref_includeMatches===void 0?Config.includeMatches:_ref_includeMatches,_ref_ignoreLocation=_ref.ignoreLocation,ignoreLocation=_ref_ignoreLocation===void 0?Config.ignoreLocation:_ref_ignoreLocation;if(pattern.length>MAX_BITS){throw new Error(PATTERN_LENGTH_TOO_LARGE(MAX_BITS))}var patternLen=pattern.length;var textLen=text.length;var expectedLocation=Math.max(0,Math.min(location,textLen));var currentThreshold=threshold;var bestLocation=expectedLocation;var computeMatches=minMatchCharLength>1||includeMatches;var matchMask=computeMatches?Array(textLen):[];var index;while((index=text.indexOf(pattern,bestLocation))>-1){var score=computeScore$1(pattern,{currentLocation:index,expectedLocation:expectedLocation,distance:distance,ignoreLocation:ignoreLocation});currentThreshold=Math.min(score,currentThreshold);bestLocation=index+patternLen;if(computeMatches){var i=0;while(i<patternLen){matchMask[index+i]=1;i+=1}}}bestLocation=-1;var lastBitArr=[];var finalScore=1;var binMax=patternLen+textLen;var mask=1<<patternLen-1;for(var i1=0;i1<patternLen;i1+=1){var binMin=0;var binMid=binMax;while(binMin<binMid){var score1=computeScore$1(pattern,{errors:i1,currentLocation:expectedLocation+binMid,expectedLocation:expectedLocation,distance:distance,ignoreLocation:ignoreLocation});if(score1<=currentThreshold){binMin=binMid}else{binMax=binMid}binMid=Math.floor((binMax-binMin)/2+binMin)}binMax=binMid;var start=Math.max(1,expectedLocation-binMid+1);var finish=findAllMatches?textLen:Math.min(expectedLocation+binMid,textLen)+patternLen;var bitArr=Array(finish+2);bitArr[finish+1]=(1<<i1)-1;for(var j=finish;j>=start;j-=1){var currentLocation=j-1;var charMatch=patternAlphabet[text.charAt(currentLocation)];if(computeMatches){matchMask[currentLocation]=+!!charMatch}bitArr[j]=(bitArr[j+1]<<1|1)&charMatch;if(i1){bitArr[j]|=(lastBitArr[j+1]|lastBitArr[j])<<1|1|lastBitArr[j+1]}if(bitArr[j]&mask){finalScore=computeScore$1(pattern,{errors:i1,currentLocation:currentLocation,expectedLocation:expectedLocation,distance:distance,ignoreLocation:ignoreLocation});if(finalScore<=currentThreshold){currentThreshold=finalScore;bestLocation=currentLocation;if(bestLocation<=expectedLocation){break}start=Math.max(1,2*expectedLocation-bestLocation)}}}var score2=computeScore$1(pattern,{errors:i1+1,currentLocation:expectedLocation,expectedLocation:expectedLocation,distance:distance,ignoreLocation:ignoreLocation});if(score2>currentThreshold){break}lastBitArr=bitArr}var result={isMatch:bestLocation>=0,score:Math.max(.001,finalScore)};if(computeMatches){var indices=convertMaskToIndices(matchMask,minMatchCharLength);if(!indices.length){result.isMatch=false}else if(includeMatches){result.indices=indices}}return result}function createPatternAlphabet(pattern){var mask={};for(var i=0,len=pattern.length;i<len;i+=1){var char=pattern.charAt(i);mask[char]=(mask[char]||0)|1<<len-i-1}return mask}var BitapSearch=/*#__PURE__*/function(){function BitapSearch(pattern){var _this=this;var _ref=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_ref_location=_ref.location,location=_ref_location===void 0?Config.location:_ref_location,_ref_threshold=_ref.threshold,threshold=_ref_threshold===void 0?Config.threshold:_ref_threshold,_ref_distance=_ref.distance,distance=_ref_distance===void 0?Config.distance:_ref_distance,_ref_includeMatches=_ref.includeMatches,includeMatches=_ref_includeMatches===void 0?Config.includeMatches:_ref_includeMatches,_ref_findAllMatches=_ref.findAllMatches,findAllMatches=_ref_findAllMatches===void 0?Config.findAllMatches:_ref_findAllMatches,_ref_minMatchCharLength=_ref.minMatchCharLength,minMatchCharLength=_ref_minMatchCharLength===void 0?Config.minMatchCharLength:_ref_minMatchCharLength,_ref_isCaseSensitive=_ref.isCaseSensitive,isCaseSensitive=_ref_isCaseSensitive===void 0?Config.isCaseSensitive:_ref_isCaseSensitive,_ref_ignoreLocation=_ref.ignoreLocation,ignoreLocation=_ref_ignoreLocation===void 0?Config.ignoreLocation:_ref_ignoreLocation;_class_call_check(this,BitapSearch);this.options={location:location,threshold:threshold,distance:distance,includeMatches:includeMatches,findAllMatches:findAllMatches,minMatchCharLength:minMatchCharLength,isCaseSensitive:isCaseSensitive,ignoreLocation:ignoreLocation};this.pattern=isCaseSensitive?pattern:pattern.toLowerCase();this.chunks=[];if(!this.pattern.length){return}var addChunk=function(pattern,startIndex){_this.chunks.push({pattern:pattern,alphabet:createPatternAlphabet(pattern),startIndex:startIndex})};var len=this.pattern.length;if(len>MAX_BITS){var i=0;var remainder=len%MAX_BITS;var end=len-remainder;while(i<end){addChunk(this.pattern.substr(i,MAX_BITS),i);i+=MAX_BITS}if(remainder){var startIndex=len-MAX_BITS;addChunk(this.pattern.substr(startIndex),startIndex)}}else{addChunk(this.pattern,0)}}_create_class(BitapSearch,[{key:"searchIn",value:function searchIn(text){var _this_options=this.options,isCaseSensitive=_this_options.isCaseSensitive,includeMatches=_this_options.includeMatches;if(!isCaseSensitive){text=text.toLowerCase()}if(this.pattern===text){var result={isMatch:true,score:0};if(includeMatches){result.indices=[[0,text.length-1]]}return result}var _this_options1=this.options,location=_this_options1.location,distance=_this_options1.distance,threshold=_this_options1.threshold,findAllMatches=_this_options1.findAllMatches,minMatchCharLength=_this_options1.minMatchCharLength,ignoreLocation=_this_options1.ignoreLocation;var allIndices=[];var totalScore=0;var hasMatches=false;this.chunks.forEach(function(param){var pattern=param.pattern,alphabet=param.alphabet,startIndex=param.startIndex;var _search=search(text,pattern,alphabet,{location:location+startIndex,distance:distance,threshold:threshold,findAllMatches:findAllMatches,minMatchCharLength:minMatchCharLength,includeMatches:includeMatches,ignoreLocation:ignoreLocation}),isMatch=_search.isMatch,score=_search.score,indices=_search.indices;if(isMatch){hasMatches=true}totalScore+=score;if(isMatch&&indices){allIndices=_to_consumable_array(allIndices).concat(_to_consumable_array(indices))}});var result1={isMatch:hasMatches,score:hasMatches?totalScore/this.chunks.length:1};if(hasMatches&&includeMatches){result1.indices=allIndices}return result1}}]);return BitapSearch}();var BaseMatch=/*#__PURE__*/function(){function BaseMatch(pattern){_class_call_check(this,BaseMatch);this.pattern=pattern}_create_class(BaseMatch,[{key:"search",value:function search(){}}],[{key:"isMultiMatch",value:function isMultiMatch(pattern){return getMatch(pattern,this.multiRegex)}},{key:"isSingleMatch",value:function isSingleMatch(pattern){return getMatch(pattern,this.singleRegex)}}]);return BaseMatch}();function getMatch(pattern,exp){var matches=pattern.match(exp);return matches?matches[1]:null}var ExactMatch=/*#__PURE__*/function(BaseMatch){_inherits(ExactMatch,BaseMatch);function ExactMatch(pattern){_class_call_check(this,ExactMatch);return _call_super(this,ExactMatch,[pattern])}_create_class(ExactMatch,[{key:"search",value:function search(text){var isMatch=text===this.pattern;return{isMatch:isMatch,score:isMatch?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function get(){return"exact"}},{key:"multiRegex",get:function get(){return/^="(.*)"$/}},{key:"singleRegex",get:function get(){return/^=(.*)$/}}]);return ExactMatch}(BaseMatch);var InverseExactMatch=/*#__PURE__*/function(BaseMatch){_inherits(InverseExactMatch,BaseMatch);function InverseExactMatch(pattern){_class_call_check(this,InverseExactMatch);return _call_super(this,InverseExactMatch,[pattern])}_create_class(InverseExactMatch,[{key:"search",value:function search(text){var index=text.indexOf(this.pattern);var isMatch=index===-1;return{isMatch:isMatch,score:isMatch?0:1,indices:[0,text.length-1]}}}],[{key:"type",get:function get(){return"inverse-exact"}},{key:"multiRegex",get:function get(){return/^!"(.*)"$/}},{key:"singleRegex",get:function get(){return/^!(.*)$/}}]);return InverseExactMatch}(BaseMatch);var PrefixExactMatch=/*#__PURE__*/function(BaseMatch){_inherits(PrefixExactMatch,BaseMatch);function PrefixExactMatch(pattern){_class_call_check(this,PrefixExactMatch);return _call_super(this,PrefixExactMatch,[pattern])}_create_class(PrefixExactMatch,[{key:"search",value:function search(text){var isMatch=text.startsWith(this.pattern);return{isMatch:isMatch,score:isMatch?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function get(){return"prefix-exact"}},{key:"multiRegex",get:function get(){return/^\^"(.*)"$/}},{key:"singleRegex",get:function get(){return/^\^(.*)$/}}]);return PrefixExactMatch}(BaseMatch);var InversePrefixExactMatch=/*#__PURE__*/function(BaseMatch){_inherits(InversePrefixExactMatch,BaseMatch);function InversePrefixExactMatch(pattern){_class_call_check(this,InversePrefixExactMatch);return _call_super(this,InversePrefixExactMatch,[pattern])}_create_class(InversePrefixExactMatch,[{key:"search",value:function search(text){var isMatch=!text.startsWith(this.pattern);return{isMatch:isMatch,score:isMatch?0:1,indices:[0,text.length-1]}}}],[{key:"type",get:function get(){return"inverse-prefix-exact"}},{key:"multiRegex",get:function get(){return/^!\^"(.*)"$/}},{key:"singleRegex",get:function get(){return/^!\^(.*)$/}}]);return InversePrefixExactMatch}(BaseMatch);var SuffixExactMatch=/*#__PURE__*/function(BaseMatch){_inherits(SuffixExactMatch,BaseMatch);function SuffixExactMatch(pattern){_class_call_check(this,SuffixExactMatch);return _call_super(this,SuffixExactMatch,[pattern])}_create_class(SuffixExactMatch,[{key:"search",value:function search(text){var isMatch=text.endsWith(this.pattern);return{isMatch:isMatch,score:isMatch?0:1,indices:[text.length-this.pattern.length,text.length-1]}}}],[{key:"type",get:function get(){return"suffix-exact"}},{key:"multiRegex",get:function get(){return/^"(.*)"\$$/}},{key:"singleRegex",get:function get(){return/^(.*)\$$/}}]);return SuffixExactMatch}(BaseMatch);var InverseSuffixExactMatch=/*#__PURE__*/function(BaseMatch){_inherits(InverseSuffixExactMatch,BaseMatch);function InverseSuffixExactMatch(pattern){_class_call_check(this,InverseSuffixExactMatch);return _call_super(this,InverseSuffixExactMatch,[pattern])}_create_class(InverseSuffixExactMatch,[{key:"search",value:function search(text){var isMatch=!text.endsWith(this.pattern);return{isMatch:isMatch,score:isMatch?0:1,indices:[0,text.length-1]}}}],[{key:"type",get:function get(){return"inverse-suffix-exact"}},{key:"multiRegex",get:function get(){return/^!"(.*)"\$$/}},{key:"singleRegex",get:function get(){return/^!(.*)\$$/}}]);return InverseSuffixExactMatch}(BaseMatch);var FuzzyMatch=/*#__PURE__*/function(BaseMatch){_inherits(FuzzyMatch,BaseMatch);function FuzzyMatch(pattern){var _ref=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_ref_location=_ref.location,location=_ref_location===void 0?Config.location:_ref_location,_ref_threshold=_ref.threshold,threshold=_ref_threshold===void 0?Config.threshold:_ref_threshold,_ref_distance=_ref.distance,distance=_ref_distance===void 0?Config.distance:_ref_distance,_ref_includeMatches=_ref.includeMatches,includeMatches=_ref_includeMatches===void 0?Config.includeMatches:_ref_includeMatches,_ref_findAllMatches=_ref.findAllMatches,findAllMatches=_ref_findAllMatches===void 0?Config.findAllMatches:_ref_findAllMatches,_ref_minMatchCharLength=_ref.minMatchCharLength,minMatchCharLength=_ref_minMatchCharLength===void 0?Config.minMatchCharLength:_ref_minMatchCharLength,_ref_isCaseSensitive=_ref.isCaseSensitive,isCaseSensitive=_ref_isCaseSensitive===void 0?Config.isCaseSensitive:_ref_isCaseSensitive,_ref_ignoreLocation=_ref.ignoreLocation,ignoreLocation=_ref_ignoreLocation===void 0?Config.ignoreLocation:_ref_ignoreLocation;_class_call_check(this,FuzzyMatch);var _this;_this=_call_super(this,FuzzyMatch,[pattern]);_this._bitapSearch=new BitapSearch(pattern,{location:location,threshold:threshold,distance:distance,includeMatches:includeMatches,findAllMatches:findAllMatches,minMatchCharLength:minMatchCharLength,isCaseSensitive:isCaseSensitive,ignoreLocation:ignoreLocation});return _this}_create_class(FuzzyMatch,[{key:"search",value:function search(text){return this._bitapSearch.searchIn(text)}}],[{key:"type",get:function get(){return"fuzzy"}},{key:"multiRegex",get:function get(){return/^"(.*)"$/}},{key:"singleRegex",get:function get(){return/^(.*)$/}}]);return FuzzyMatch}(BaseMatch);var IncludeMatch=/*#__PURE__*/function(BaseMatch){_inherits(IncludeMatch,BaseMatch);function IncludeMatch(pattern){_class_call_check(this,IncludeMatch);return _call_super(this,IncludeMatch,[pattern])}_create_class(IncludeMatch,[{key:"search",value:function search(text){var location=0;var index;var indices=[];var patternLen=this.pattern.length;while((index=text.indexOf(this.pattern,location))>-1){location=index+patternLen;indices.push([index,location-1])}var isMatch=!!indices.length;return{isMatch:isMatch,score:isMatch?0:1,indices:indices}}}],[{key:"type",get:function get(){return"include"}},{key:"multiRegex",get:function get(){return/^'"(.*)"$/}},{key:"singleRegex",get:function get(){return/^'(.*)$/}}]);return IncludeMatch}(BaseMatch);var searchers=[ExactMatch,IncludeMatch,PrefixExactMatch,InversePrefixExactMatch,InverseSuffixExactMatch,SuffixExactMatch,InverseExactMatch,FuzzyMatch];var searchersLen=searchers.length;var SPACE_RE=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;var OR_TOKEN="|";function parseQuery(pattern){var options=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return pattern.split(OR_TOKEN).map(function(item){var query=item.trim().split(SPACE_RE).filter(function(item){return item&&!!item.trim()});var results=[];for(var i=0,len=query.length;i<len;i+=1){var queryItem=query[i];var found=false;var idx=-1;while(!found&&++idx<searchersLen){var searcher=searchers[idx];var token=searcher.isMultiMatch(queryItem);if(token){results.push(new searcher(token,options));found=true}}if(found){continue}idx=-1;while(++idx<searchersLen){var searcher1=searchers[idx];var token1=searcher1.isSingleMatch(queryItem);if(token1){results.push(new searcher1(token1,options));break}}}return results})}var MultiMatchSet=new Set([FuzzyMatch.type,IncludeMatch.type]);var ExtendedSearch=/*#__PURE__*/function(){function ExtendedSearch(pattern){var _ref=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_ref_isCaseSensitive=_ref.isCaseSensitive,isCaseSensitive=_ref_isCaseSensitive===void 0?Config.isCaseSensitive:_ref_isCaseSensitive,_ref_includeMatches=_ref.includeMatches,includeMatches=_ref_includeMatches===void 0?Config.includeMatches:_ref_includeMatches,_ref_minMatchCharLength=_ref.minMatchCharLength,minMatchCharLength=_ref_minMatchCharLength===void 0?Config.minMatchCharLength:_ref_minMatchCharLength,_ref_ignoreLocation=_ref.ignoreLocation,ignoreLocation=_ref_ignoreLocation===void 0?Config.ignoreLocation:_ref_ignoreLocation,_ref_findAllMatches=_ref.findAllMatches,findAllMatches=_ref_findAllMatches===void 0?Config.findAllMatches:_ref_findAllMatches,_ref_location=_ref.location,location=_ref_location===void 0?Config.location:_ref_location,_ref_threshold=_ref.threshold,threshold=_ref_threshold===void 0?Config.threshold:_ref_threshold,_ref_distance=_ref.distance,distance=_ref_distance===void 0?Config.distance:_ref_distance;_class_call_check(this,ExtendedSearch);this.query=null;this.options={isCaseSensitive:isCaseSensitive,includeMatches:includeMatches,minMatchCharLength:minMatchCharLength,findAllMatches:findAllMatches,ignoreLocation:ignoreLocation,location:location,threshold:threshold,distance:distance};this.pattern=isCaseSensitive?pattern:pattern.toLowerCase();this.query=parseQuery(this.pattern,this.options)}_create_class(ExtendedSearch,[{key:"searchIn",value:function searchIn(text){var query=this.query;if(!query){return{isMatch:false,score:1}}var _this_options=this.options,includeMatches=_this_options.includeMatches,isCaseSensitive=_this_options.isCaseSensitive;text=isCaseSensitive?text:text.toLowerCase();var numMatches=0;var allIndices=[];var totalScore=0;for(var i=0,qLen=query.length;i<qLen;i+=1){var searchers=query[i];allIndices.length=0;numMatches=0;for(var j=0,pLen=searchers.length;j<pLen;j+=1){var searcher=searchers[j];var _searcher_search=searcher.search(text),isMatch=_searcher_search.isMatch,indices=_searcher_search.indices,score=_searcher_search.score;if(isMatch){numMatches+=1;totalScore+=score;if(includeMatches){var type=searcher.constructor.type;if(MultiMatchSet.has(type)){allIndices=_to_consumable_array(allIndices).concat(_to_consumable_array(indices))}else{allIndices.push(indices)}}}else{totalScore=0;numMatches=0;allIndices.length=0;break}}if(numMatches){var result={isMatch:true,score:totalScore/numMatches};if(includeMatches){result.indices=allIndices}return result}}return{isMatch:false,score:1}}}],[{key:"condition",value:function condition(_,options){return options.useExtendedSearch}}]);return ExtendedSearch}();var registeredSearchers=[];function register(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var _registeredSearchers;(_registeredSearchers=registeredSearchers).push.apply(_registeredSearchers,_to_consumable_array(args))}function createSearcher(pattern,options){for(var i=0,len=registeredSearchers.length;i<len;i+=1){var searcherClass=registeredSearchers[i];if(searcherClass.condition(pattern,options)){return new searcherClass(pattern,options)}}return new BitapSearch(pattern,options)}var LogicalOperator={AND:"$and",OR:"$or"};var KeyType={PATH:"$path",PATTERN:"$val"};var isExpression=function(query){return!!(query[LogicalOperator.AND]||query[LogicalOperator.OR])};var isPath=function(query){return!!query[KeyType.PATH]};var isLeaf=function(query){return!isArray(query)&&isObject(query)&&!isExpression(query)};var convertToExplicit=function(query){return _define_property({},LogicalOperator.AND,Object.keys(query).map(function(key){return _define_property({},key,query[key])}))};function parse(query,options){var _ref=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_ref_auto=_ref.auto,auto=_ref_auto===void 0?true:_ref_auto;var next=function(query){var keys=Object.keys(query);var isQueryPath=isPath(query);if(!isQueryPath&&keys.length>1&&!isExpression(query)){return next(convertToExplicit(query))}if(isLeaf(query)){var key=isQueryPath?query[KeyType.PATH]:keys[0];var pattern=isQueryPath?query[KeyType.PATTERN]:query[key];if(!isString(pattern)){throw new Error(LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY(key))}var obj={keyId:createKeyId(key),pattern:pattern};if(auto){obj.searcher=createSearcher(pattern,options)}return obj}var node={children:[],operator:keys[0]};keys.forEach(function(key){var value=query[key];if(isArray(value)){value.forEach(function(item){node.children.push(next(item))})}});return node};if(!isExpression(query)){query=convertToExplicit(query)}return next(query)}function computeScore(results,param){var _param_ignoreFieldNorm=param.ignoreFieldNorm,ignoreFieldNorm=_param_ignoreFieldNorm===void 0?Config.ignoreFieldNorm:_param_ignoreFieldNorm;results.forEach(function(result){var totalScore=1;result.matches.forEach(function(param){var key=param.key,norm=param.norm,score=param.score;var weight=key?key.weight:null;totalScore*=Math.pow(score===0&&weight?Number.EPSILON:score,(weight||1)*(ignoreFieldNorm?1:norm))});result.score=totalScore})}function transformMatches(result,data){var matches=result.matches;data.matches=[];if(!isDefined(matches)){return}matches.forEach(function(match){if(!isDefined(match.indices)||!match.indices.length){return}var indices=match.indices,value=match.value;var obj={indices:indices,value:value};if(match.key){obj.key=match.key.src}if(match.idx>-1){obj.refIndex=match.idx}data.matches.push(obj)})}function transformScore(result,data){data.score=result.score}function format(results,docs){var _ref=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_ref_includeMatches=_ref.includeMatches,includeMatches=_ref_includeMatches===void 0?Config.includeMatches:_ref_includeMatches,_ref_includeScore=_ref.includeScore,includeScore=_ref_includeScore===void 0?Config.includeScore:_ref_includeScore;var transformers=[];if(includeMatches)transformers.push(transformMatches);if(includeScore)transformers.push(transformScore);return results.map(function(result){var idx=result.idx;var data={item:docs[idx],refIndex:idx};if(transformers.length){transformers.forEach(function(transformer){transformer(result,data)})}return data})}var Fuse=/*#__PURE__*/function(){function Fuse(docs){var options=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},index=arguments.length>2?arguments[2]:void 0;_class_call_check(this,Fuse);this.options=_object_spread({},Config,options);if(this.options.useExtendedSearch&&!true){throw new Error(EXTENDED_SEARCH_UNAVAILABLE)}this._keyStore=new KeyStore(this.options.keys);this.setCollection(docs,index)}_create_class(Fuse,[{key:"setCollection",value:function setCollection(docs,index){this._docs=docs;if(index&&!_instanceof(index,FuseIndex)){throw new Error(INCORRECT_INDEX_TYPE)}this._myIndex=index||createIndex(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}},{key:"add",value:function add(doc){if(!isDefined(doc)){return}this._docs.push(doc);this._myIndex.add(doc)}},{key:"remove",value:function remove(){var predicate=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){return false};var results=[];for(var i=0,len=this._docs.length;i<len;i+=1){var doc=this._docs[i];if(predicate(doc,i)){this.removeAt(i);i-=1;len-=1;results.push(doc)}}return results}},{key:"removeAt",value:function removeAt(idx){this._docs.splice(idx,1);this._myIndex.removeAt(idx)}},{key:"getIndex",value:function getIndex(){return this._myIndex}},{key:"search",value:function search(query){var _ref=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_ref_limit=_ref.limit,limit=_ref_limit===void 0?-1:_ref_limit;var _this_options=this.options,includeMatches=_this_options.includeMatches,includeScore=_this_options.includeScore,shouldSort=_this_options.shouldSort,sortFn=_this_options.sortFn,ignoreFieldNorm=_this_options.ignoreFieldNorm;var results=isString(query)?isString(this._docs[0])?this._searchStringList(query):this._searchObjectList(query):this._searchLogical(query);computeScore(results,{ignoreFieldNorm:ignoreFieldNorm});if(shouldSort){results.sort(sortFn)}if(isNumber(limit)&&limit>-1){results=results.slice(0,limit)}return format(results,this._docs,{includeMatches:includeMatches,includeScore:includeScore})}},{key:"_searchStringList",value:function _searchStringList(query){var searcher=createSearcher(query,this.options);var records=this._myIndex.records;var results=[];records.forEach(function(param){var text=param.v,idx=param.i,norm=param.n;if(!isDefined(text)){return}var _searcher_searchIn=searcher.searchIn(text),isMatch=_searcher_searchIn.isMatch,score=_searcher_searchIn.score,indices=_searcher_searchIn.indices;if(isMatch){results.push({item:text,idx:idx,matches:[{score:score,value:text,norm:norm,indices:indices}]})}});return results}},{key:"_searchLogical",value:function _searchLogical(query){var _this=this;var expression=parse(query,this.options);var evaluate=function(node,item,idx){if(!node.children){var keyId=node.keyId,searcher=node.searcher;var matches=_this._findMatches({key:_this._keyStore.get(keyId),value:_this._myIndex.getValueForItemAtKeyId(item,keyId),searcher:searcher});if(matches&&matches.length){return[{idx:idx,item:item,matches:matches}]}return[]}var res=[];for(var i=0,len=node.children.length;i<len;i+=1){var child=node.children[i];var result=evaluate(child,item,idx);if(result.length){var _res;(_res=res).push.apply(_res,_to_consumable_array(result))}else if(node.operator===LogicalOperator.AND){return[]}}return res};var records=this._myIndex.records;var resultMap={};var results=[];records.forEach(function(param){var item=param.$,idx=param.i;if(isDefined(item)){var expResults=evaluate(expression,item,idx);if(expResults.length){if(!resultMap[idx]){resultMap[idx]={idx:idx,item:item,matches:[]};results.push(resultMap[idx])}expResults.forEach(function(param){var matches=param.matches;var _resultMap_idx_matches;(_resultMap_idx_matches=resultMap[idx].matches).push.apply(_resultMap_idx_matches,_to_consumable_array(matches))})}}});return results}},{key:"_searchObjectList",value:function _searchObjectList(query){var _this=this;var searcher=createSearcher(query,this.options);var _this__myIndex=this._myIndex,keys=_this__myIndex.keys,records=_this__myIndex.records;var results=[];records.forEach(function(param){var item=param.$,idx=param.i;if(!isDefined(item)){return}var matches=[];keys.forEach(function(key,keyIndex){var _matches;(_matches=matches).push.apply(_matches,_to_consumable_array(_this._findMatches({key:key,value:item[keyIndex],searcher:searcher})))});if(matches.length){results.push({idx:idx,item:item,matches:matches})}});return results}},{key:"_findMatches",value:function _findMatches(param){var key=param.key,value=param.value,searcher=param.searcher;if(!isDefined(value)){return[]}var matches=[];if(isArray(value)){value.forEach(function(param){var text=param.v,idx=param.i,norm=param.n;if(!isDefined(text)){return}var _searcher_searchIn=searcher.searchIn(text),isMatch=_searcher_searchIn.isMatch,score=_searcher_searchIn.score,indices=_searcher_searchIn.indices;if(isMatch){matches.push({score:score,key:key,value:text,idx:idx,norm:norm,indices:indices})}})}else{var text=value.v,norm=value.n;var _searcher_searchIn=searcher.searchIn(text),isMatch=_searcher_searchIn.isMatch,score=_searcher_searchIn.score,indices=_searcher_searchIn.indices;if(isMatch){matches.push({score:score,key:key,value:text,norm:norm,indices:indices})}}return matches}}]);return Fuse}();Fuse.version="7.0.0";Fuse.createIndex=createIndex;Fuse.parseIndex=parseIndex;Fuse.config=Config;{Fuse.parseQuery=parse}{register(ExtendedSearch)}var AnatoloRef=/*#__PURE__*/function(){function AnatoloRef(val){_class_call_check(this,AnatoloRef);_define_property(this,"_val",void 0);_define_property(this,"_watchers",[]);this._val=val}_create_class(AnatoloRef,[{key:"value",get:function get(){return this._val},set:function set(val){this._val=val;var _iteratorNormalCompletion=true,_didIteratorError=false,_iteratorError=undefined;try{for(var _iterator=this._watchers[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var watcher=_step.value;watcher.fn(val);watcher.time--}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}this._watchers=this._watchers.filter(function(w){return w.time>0})}},{key:"watch",value:function watch(fn){var time=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Infinity;this._watchers.push({fn:fn,time:time})}},{key:"watchOnce",value:function watchOnce(fn){this._watchers.push({fn:fn,time:1})}},{key:"nextVal",value:function nextVal(){var _this=this;return _async_to_generator(function(){return _ts_generator(this,function(_state){return[2,new Promise(function(res){_this.watchOnce(function(){return res(_this.value)})})]})})()}},{key:"_checkin",value:function _checkin(vals){var _iteratorNormalCompletion=true,_didIteratorError=false,_iteratorError=undefined;try{for(var _iterator=vals[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var val=_step.value;if(val==null&&this._val==null)return true;if(this._val===val)return true}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return false}},{key:"unitl",value:function unitl(){for(var _len=arguments.length,vals=new Array(_len),_key=0;_key<_len;_key++){vals[_key]=arguments[_key]}var _this=this;return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!!_this._checkin(vals))return[3,2];return[4,_this.nextVal()];case 1:_state.sent();return[3,0];case 2:return[2,_this.value]}})})()}},{key:"unitlNot",value:function unitlNot(){for(var _len=arguments.length,vals=new Array(_len),_key=0;_key<_len;_key++){vals[_key]=arguments[_key]}var _this=this;return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!_this._checkin(vals))return[3,2];return[4,_this.nextVal()];case 1:_state.sent();return[3,0];case 2:return[2,_this.value]}})})()}}]);return AnatoloRef}();var SiteStatic={get base(){var _document_getElementById;var _document_getElementById_dataset_url;return(_document_getElementById_dataset_url=(_document_getElementById=document.getElementById("site_data_static"))===null||_document_getElementById===void 0?void 0:_document_getElementById.dataset.url)!==null&&_document_getElementById_dataset_url!==void 0?_document_getElementById_dataset_url:"/"},get root(){return new URL(this.base,window.location.origin)},url_for:function url_for(url){if(url[0]==="/"){url=url.slice(1)}return this.root+url}};var AnatoloDynamicResource=/*#__PURE__*/function(){function AnatoloDynamicResource(src){var _this=this;var transform=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(x){return x};_class_call_check(this,AnatoloDynamicResource);_define_property(this,"loaded",new AnatoloRef(false));_define_property(this,"__data",null);var promise=typeof src==="string"?fetch(SiteStatic.url_for(src)).then(function(body){return body.json()}):src;promise.then(function(res){_this.loaded.value=true;_this.__data=transform(res)})}_create_class(AnatoloDynamicResource,[{key:"data",value:function data(){var _this=this;return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,_this.loaded.unitl(true)];case 1:_state.sent();return[2,_this.__data]}})})()}}]);return AnatoloDynamicResource}();function h(ident,attrs){for(var _len=arguments.length,content=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){content[_key-2]=arguments[_key]}var _elem_classList;var _ident_split=_to_array(ident.split(".")),tagName=_ident_split[0],classes=_ident_split.slice(1);if(!tagName)tagName="div";var elem=document.createElement(tagName);(_elem_classList=elem.classList).add.apply(_elem_classList,_to_consumable_array(classes));if(attrs!=null){var _iteratorNormalCompletion=true,_didIteratorError=false,_iteratorError=undefined;try{for(var _iterator=Object.entries(attrs)[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _step_value=_sliced_to_array(_step.value,2),key=_step_value[0],val=_step_value[1];if(key==="class"&&attrs.class){var _elem_classList1;(_elem_classList1=elem.classList).add.apply(_elem_classList1,_to_consumable_array(attrs.class.split(" ")))}else if(key.startsWith("on")){elem.addEventListener(key.slice(2),val)}else{elem.setAttribute(key,val)}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}function addContent(c){if(typeof c==="string"){elem.innerHTML+=c}else if(_instanceof(c,Element)){elem.appendChild(c)}}content.flat().forEach(function(c){addContent(c)});return elem}function escapeHTML(str){return String(str).replace(/[&<>'"]/g,function(tag){return({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"})[tag]||tag})}function make_friends_list(){try{var friendHTML=function(param){var avatar=param.avatar,href=param.href,title=param.title,description=param.description;return /*#__PURE__*/h("div",{class:"friend-link-container"},/*#__PURE__*/h("div",{class:"friend-link-box"},/*#__PURE__*/h("aside",{class:"friend-link-avatar"},/*#__PURE__*/h("img",{src:avatar,href:href})),/*#__PURE__*/h("div",{class:"friend-link-meta"},/*#__PURE__*/h("div",{class:"friend-link-title"},/*#__PURE__*/h("a",{href:href},escapeHTML(title))),/*#__PURE__*/h("div",{class:"friend-link-description"},escapeHTML(description)))))};document.querySelectorAll(".friend-link").forEach(function(friend){friend.replaceWith(friendHTML(friend.dataset))})}catch(err){console.error(err)}}function success(){return new Promise(function(res){var successIndicator=document.getElementById("success-indicator");successIndicator===null||successIndicator===void 0?void 0:successIndicator.classList.add("show");setTimeout(function(){successIndicator===null||successIndicator===void 0?void 0:successIndicator.classList.add("animated","fadeOut")},500);setTimeout(function(){successIndicator===null||successIndicator===void 0?void 0:successIndicator.classList.remove("show","animated","fadeOut");res()},1e3)})}function copyToClipboard(text){return _copyToClipboard.apply(this,arguments)}function _copyToClipboard(){_copyToClipboard=_async_to_generator(function(text){var err,t;return _ts_generator(this,function(_state){switch(_state.label){case 0:_state.trys.push([0,2,3,4]);return[4,window.navigator.clipboard.writeText(text)];case 1:_state.sent();return[3,4];case 2:err=_state.sent();t=document.createElement("textarea");t.value=text;t.style.width="0";t.style.position="fixed";t.style.left="-999px";t.style.top="10px";t.setAttribute("readonly","readonly");document.body.appendChild(t);t.select();document.execCommand("copy");document.body.removeChild(t);return[3,4];case 3:success();return[7];case 4:return[2]}})});return _copyToClipboard.apply(this,arguments)}function nextTick(fn){setTimeout(function(){fn()},10)}var Utils=/*#__PURE__*/Object.freeze({__proto__:null,copyToClipboard:copyToClipboard,escapeHTML:escapeHTML,h:h,make_friends_list:make_friends_list,nextTick:nextTick});var Component=/*#__PURE__*/function(){function Component(){var _this=this;_class_call_check(this,Component);document.addEventListener("DOMContentLoaded",function(){_this.init()},{once:true})}_create_class(Component,[{key:"init",value:function init(){}}]);return Component}();var urlMap=new Map;var siteData=new AnatoloDynamicResource("site.json");siteData.data().then(function(data){for(var _i=0,_iter=["pages","posts","tags","categories"];_i<_iter.length;_i++){var key=_iter[_i];var _data_key;var _iteratorNormalCompletion=true,_didIteratorError=false,_iteratorError=undefined;try{for(var _iterator=((_data_key=data[key])!==null&&_data_key!==void 0?_data_key:[])[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var page=_step.value;var _page_path;var prettyPath=((_page_path=page.path)===null||_page_path===void 0?void 0:_page_path.replaceAll("index.html",""))||"";urlMap.set(prettyPath,page)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}});var site=_object_spread_props(_object_spread({},SiteStatic),{data:function data(){return siteData.data()},thisPageUrl:function thisPageUrl(){var path=window.location.pathname;if(path.startsWith("/"))path=path.slice(1);if(path.slice(-1)!=="/")path+="/";path=decodeURI(path);return path},thisPage:function thisPage(){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,site.data()];case 1:_state.sent();return[2,urlMap.get(site.thisPageUrl())]}})})()}});function loadScript(config){return _loadScript.apply(this,arguments)}function _loadScript(){_loadScript=_async_to_generator(function(config){var runner;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!config.url)return[3,2];return[4,fetch(config.url).then(function(r){return r.text()})];case 1:config.script=_state.sent();_state.label=2;case 2:if(!config.script){return[2]}runner=new Function(config.script);runner();return[2]}})});return _loadScript.apply(this,arguments)}var NotHTMLError=/*#__PURE__*/function(Error1){_inherits(NotHTMLError,Error1);function NotHTMLError(url){_class_call_check(this,NotHTMLError);var _this;_this=_call_super(this,NotHTMLError),_define_property(_this,"url",void 0);_this.url=url;return _this}return NotHTMLError}(_wrap_native_super(Error));var pageChangeFns=[];var pageCaches=new Map;var animating=new AnatoloRef(false);var loading=new AnatoloRef(false);function initialize(){window.history.scrollRestoration="manual";window.addEventListener("DOMContentLoaded",function(){handlePage()});window.addEventListener("popstate",function(event){event.preventDefault();routeTo(window.location.href,false)},false);makeLink()}function isThisSite(url){if(!url)return false;url+="/";return url.startsWith(site.root.href)||url.startsWith(site.base)}function scrollToHash(hash){if(hash==null)hash=window.location.hash;if(!hash)return;var sid=decodeURI(hash).slice(1);var go=document.getElementById(sid);if(go){var _go_offsetParent;window.scrollTo({left:0,top:go.offsetTop+(((_go_offsetParent=go.offsetParent)===null||_go_offsetParent===void 0?void 0:_go_offsetParent.offsetTop)||0)-80,behavior:"smooth"})}}function getThisPageCache(){return{url:document.location.href,body:document.getElementsByTagName("main-outlet")[0].innerHTML,title:document.title,scrollY:window.scrollY}}function cacheThisPage(){pageCaches.set(document.location.href,getThisPageCache())}function updatePageCache(state){var had=pageCaches.get(state.url);if(had){Object.assign(had,state)}else{pageCaches.set(state.url,state)}}function showLoadingAnimation(){animating.value=true;setTimeout(function(){animating.value=false},250)}function withLoading(handler){return _withLoading.apply(this,arguments)}function _withLoading(){_withLoading=_async_to_generator(function(handler){var mainEl,mainEl2;return _ts_generator(this,function(_state){switch(_state.label){case 0:loading.value=true;showLoadingAnimation();mainEl=document.querySelector(".main.animated");mainEl===null||mainEl===void 0?void 0:mainEl.classList.add("fadeOutDown");mainEl===null||mainEl===void 0?void 0:mainEl.classList.remove("fadeInDown");return[4,handler()];case 1:_state.sent();mainEl2=document.querySelector(".main.animated");mainEl2===null||mainEl2===void 0?void 0:mainEl2.classList.remove("fadeOutDown");mainEl2===null||mainEl2===void 0?void 0:mainEl2.classList.add("fadeInDown");loading.value=false;return[2]}})});return _withLoading.apply(this,arguments)}function queryPageData(link){return _queryPageData.apply(this,arguments)}function _queryPageData(){_queryPageData=_async_to_generator(function(link){var _res_match,_res_match1,_head_match,cached,res,body,head,title;return _ts_generator(this,function(_state){switch(_state.label){case 0:cached=pageCaches.get(link);if(cached)return[2,cached];return[4,fetch(link).then(function(res){return res.text()})];case 1:res=_state.sent();if(typeof res!=="string"){throw new NotHTMLError(link)}body=(_res_match=res.match(/<main-outlet>([\s\S]*)<\/main-outlet>/))===null||_res_match===void 0?void 0:_res_match[1];if(!body){throw new NotHTMLError(link)}head=(_res_match1=res.match(/<head>([\s\S]*)<\/head>/))===null||_res_match1===void 0?void 0:_res_match1[1];title=head===null||head===void 0?void 0:(_head_match=head.match(/<title>([\s\S]*)<\/title>/))===null||_head_match===void 0?void 0:_head_match[1];title!==null&&title!==void 0?title:title=document.title;return[2,{url:link,body:body,title:title}]}})});return _queryPageData.apply(this,arguments)}function recoveryScrollY(scrollY){var sidebarheight=document.getElementsByClassName("sidebar")[0].clientHeight-40;if(!scrollY){if(window.innerWidth>960){window.scrollTo({left:0,top:0,behavior:"smooth"})}else{if(window.location.href===site.url_for("/")||window.location.href.slice(0,-1)===site.url_for("/")){window.scrollTo({left:0,top:0,behavior:"smooth"})}else{window.scrollTo({left:0,top:sidebarheight})}}}else{window.scrollTo({left:0,top:scrollY})}}function replacePageContent(_){return _replacePageContent.apply(this,arguments)}function _replacePageContent(){_replacePageContent=_async_to_generator(function(param){var body,title,url,scrollY,pushState;var _arguments=arguments;return _ts_generator(this,function(_state){switch(_state.label){case 0:body=param.body,title=param.title,url=param.url,scrollY=param.scrollY,pushState=_arguments.length>1&&_arguments[1]!==void 0?_arguments[1]:true;cacheThisPage();return[4,animating.unitl(false)];case 1:_state.sent();if(pushState){history.pushState({time:new Date,url:url},"",url)}document.querySelector("main-outlet").innerHTML=body;document.title=title;updatePageCache({url:document.location.href,body:body,title:title});handlePage();recoveryScrollY(scrollY);return[2]}})});return _replacePageContent.apply(this,arguments)}function routeToNewPage(url,pushState){return _routeToNewPage.apply(this,arguments)}function _routeToNewPage(){_routeToNewPage=_async_to_generator(function(url,pushState){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,withLoading(/*#__PURE__*/_async_to_generator(function(){var res;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(pushState){cacheThisPage()}return[4,queryPageData(url.href)];case 1:res=_state.sent();return[4,replacePageContent(res,pushState)];case 2:_state.sent();return[2]}})}))];case 1:_state.sent();handlePage();return[2]}})});return _routeToNewPage.apply(this,arguments)}function handlePage(){scrollToHash();reloadScript();pageChangeFns.forEach(function(fn){try{fn()}catch(error){console.error(error)}})}function makeLink(){document.addEventListener("click",function(ev){var target=ev.target;while(target){if(target.onclick)return;if(isThisSite(target.href)){ev.preventDefault();ev.stopPropagation();routeTo(target.href,true)}target=target.parentNode}})}function onPageChange(fn){pageChangeFns.push(fn)}function reloadScript(){var _document_querySelector;var body_scripts=(_document_querySelector=document.querySelector("main-outlet"))===null||_document_querySelector===void 0?void 0:_document_querySelector.getElementsByTagName("script");var _iteratorNormalCompletion=true,_didIteratorError=false,_iteratorError=undefined;try{for(var _iterator=(body_scripts!==null&&body_scripts!==void 0?body_scripts:[])[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var script=_step.value;loadScript({url:script.src,script:script.textContent})}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}function routeTo(link){return _routeTo.apply(this,arguments)}function _routeTo(){_routeTo=_async_to_generator(function(link){var pushState,url;var _arguments=arguments;return _ts_generator(this,function(_state){pushState=_arguments.length>1&&_arguments[1]!==void 0?_arguments[1]:true;if(!link)return[2];if(isThisSite(link)){url=new URL(link,window.location.origin);if(pushState&&url.pathname===window.location.pathname){history.replaceState({time:new Date},document.title,link);scrollToHash(url.hash)}else{routeToNewPage(url,pushState).catch(function(err){if(err.status===404){window.location.href=err.url;return}if(_instanceof(err,NotHTMLError)){window.location.href=err.url;return}console.error(err);alert(err);replacePageContent(getThisPageCache(),false)})}}else{window.location.href=link}return[2]})});return _routeTo.apply(this,arguments)}initialize();var router={onPageChange:onPageChange,routeTo:routeTo};router.onPageChange(make_friends_list);var SEARCH_RESULT_LIMIT=5;var SEARCHABLE=["posts","pages","tags","categories"];var AnatoloSearch=/*#__PURE__*/function(Component){_inherits(AnatoloSearch,Component);function AnatoloSearch(){_class_call_check(this,AnatoloSearch);var _this;_this=_call_super(this,AnatoloSearch),_define_property(_this,"searchData",void 0),_define_property(_this,"config",{}),_define_property(_this,"showing",false),_define_property(_this,"fuses",{}),_define_property(_this,"fuse_ok",new AnatoloRef(false));_this.searchData=new AnatoloDynamicResource("content.json");return _this}_create_class(AnatoloSearch,[{key:"mainEl",get:function get(){return document.querySelector(".ins-search")}},{key:"inputEl",get:function get(){var _this_mainEl;return(_this_mainEl=this.mainEl)===null||_this_mainEl===void 0?void 0:_this_mainEl.querySelector(".ins-search-input")}},{key:"wrapperEl",get:function get(){var _this_mainEl;return(_this_mainEl=this.mainEl)===null||_this_mainEl===void 0?void 0:_this_mainEl.querySelector(".ins-section-wrapper")}},{key:"containerEl",get:function get(){var _this_mainEl;return(_this_mainEl=this.mainEl)===null||_this_mainEl===void 0?void 0:_this_mainEl.querySelector(".ins-section-container")}},{key:"init",value:function init(){var _this=this;this.buildFuse();document.body.appendChild(this.mainEl);this.inputEl.addEventListener("keydown",function(e){switch(e.code){case"ArrowDown":_this.markActive(_this.getSelectedIndex()+1);break;case"ArrowUp":_this.markActive(_this.getSelectedIndex()-1);break;case"Enter":var _document_querySelector;var url=(_document_querySelector=document.querySelector(".ins-selectable.active"))===null||_document_querySelector===void 0?void 0:_document_querySelector.dataset.url;if(url)_this.gotoLink(url);break;case"Escape":_this.closeWindow();break}});this.inputEl.addEventListener("input",function(){nextTick(function(){_this.search()})});document.addEventListener("keydown",function(e){var focused=document.querySelector(":focus");if((focused===null||focused===void 0?void 0:focused.tagName)==="TEXTAREA"||(focused===null||focused===void 0?void 0:focused.tagName)==="INPUT"){return}if(_this.showing){return}if(e.key==="s"){nextTick(function(){return _this.openWindow()})}});document.addEventListener("click",function(e){if(e.target!==_this.inputEl&&_this.showing){_this.closeWindow()}})}},{key:"getSelectedIndex",value:function getSelectedIndex(){var index=-1;document.querySelectorAll(".ins-selectable").forEach(function(elem,id){if(elem.classList.contains("active"))index=id});return index}},{key:"markActive",value:function markActive(index){var items=document.querySelectorAll(".ins-selectable");index=(index+Number(index==-2)+items.length)%items.length;items.forEach(function(elem,id){elem.classList.remove("active");if(id===index){elem.classList.add("active")}})}},{key:"gotoLink",value:function gotoLink(url){router.routeTo(url);this.closeWindow()}},{key:"makeSearchItem",value:function makeSearchItem(icon,title,slug,preview,url){var _this=this;return /*#__PURE__*/h("div",{class:"ins-selectable ins-search-item","data-url":url,onclick:function(){_this.gotoLink(url)}},/*#__PURE__*/h("header",null,/*#__PURE__*/h("i",{class:"fa fa-".concat(icon)}),/*#__PURE__*/h("span",{class:"ins-title"},title!=null&&title!==""?title:this.config.translation["untitled"]),slug&&slug!==title?/*#__PURE__*/h("span",{class:"ins-slug"},slug):null),preview?/*#__PURE__*/h("p",{class:"ins-search-preview"},preview):null)}},{key:"makeSection",value:function makeSection(sectionType,array){var _this=this;var sectionTitle=this.config.translation[sectionType];var searchItems;if(array.length===0)return null;searchItems=array.map(function(item){var newItem={};var _iteratorNormalCompletion=true,_didIteratorError=false,_iteratorError=undefined;try{for(var _iterator=Object.entries(item)[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _step_value=_sliced_to_array(_step.value,2),key=_step_value[0],val=_step_value[1];if(key==="link"){newItem[key]=val;continue}newItem[key]=escapeHTML(val)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}var _ref;var matches=(_ref="matches"in item?item.matches:null)!==null&&_ref!==void 0?_ref:[];var _iteratorNormalCompletion1=true,_didIteratorError1=false,_iteratorError1=undefined;try{for(var _iterator1=matches[Symbol.iterator](),_step1;!(_iteratorNormalCompletion1=(_step1=_iterator1.next()).done);_iteratorNormalCompletion1=true){var matched=_step1.value;if(matched.key==="link")continue;if(matched.key==null)continue;var _matched_indices_reduce=_sliced_to_array(matched.indices.reduce(function(a,b){return a[1]-a[0]<b[1]-b[0]?b:a},[0,-1]),2),st=_matched_indices_reduce[0],ed=_matched_indices_reduce[1];newItem[matched.key]=escapeHTML(item[matched.key].slice(0,st))+"<mark>"+escapeHTML(item[matched.key].slice(st,ed+1))+"</mark>"+escapeHTML(item[matched.key].slice(ed+1));if(matched.key==="text"){newItem.text=newItem.text.slice(Math.max(st-20,0))}}}catch(err){_didIteratorError1=true;_iteratorError1=err}finally{try{if(!_iteratorNormalCompletion1&&_iterator1.return!=null){_iterator1.return()}}finally{if(_didIteratorError1){throw _iteratorError1}}}if(["posts","pages"].includes(sectionType)){return _this.makeSearchItem("file",newItem.title,null,newItem.text.slice(0,150),newItem.link)}if(["categories","tags"].includes(sectionType)){return _this.makeSearchItem(sectionType==="categories"?"folder":"tag",newItem.name,newItem.slug,null,newItem.link)}return null});return /*#__PURE__*/h("section",{class:"ins-section"},/*#__PURE__*/h("header",{class:"ins-section-header"},sectionTitle),searchItems)}},{key:"buildFuse",value:function buildFuse(){var _this=this;return _async_to_generator(function(){var data;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,_this.searchData.data()];case 1:data=_state.sent();Fuse.config.ignoreLocation=true;Fuse.config.includeMatches=true;_this.fuses.posts=new Fuse(data.posts,{keys:["title","text","link"]});_this.fuses.pages=new Fuse(data.pages,{keys:["title","text","link"]});_this.fuses.tags=new Fuse(data.tags,{keys:["name","slug","link"]});_this.fuses.categories=new Fuse(data.categories,{keys:["name","slug","link"]});_this.fuse_ok.value=true;return[2]}})})()}},{key:"getSearchResult",value:function getSearchResult(keyword){var _this=this;return _async_to_generator(function(){var data,searched;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,_this.fuse_ok.unitl(true)];case 1:_state.sent();return[4,_this.searchData.data()];case 2:data=_state.sent();searched=function(t){return keyword?_this.fuses[t].search(keyword,{limit:SEARCH_RESULT_LIMIT}).map(function(res){return _object_spread({},res,res.item)}):data[t].slice(0,5)};return[2,SEARCHABLE.map(function(s){return[s,searched(s)]})]}})})()}},{key:"search",value:function search(){var _this=this;var keyword=this.inputEl.value;this.getSearchResult(keyword).then(function(res){_this.containerEl.innerHTML="";var _iteratorNormalCompletion=true,_didIteratorError=false,_iteratorError=undefined;try{for(var _iterator=res[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _step_value=_sliced_to_array(_step.value,2),key=_step_value[0],result=_step_value[1];var section=_this.makeSection(key,result);if(section)_this.containerEl.appendChild(section)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}})}},{key:"selectItemByDiff",value:function selectItemByDiff(value){var items=this.containerEl.querySelectorAll(".ins-selectable");var prevPosition=-1;items.forEach(function(elem,index){if(elem.classList.contains("active")){elem.classList.remove("active");prevPosition=index;return}});var nextPosition=(items.length+prevPosition+value)%items.length;items[nextPosition].classList.add("active")}},{key:"openWindow",value:function openWindow(){var _this=this;this.mainEl.classList.add("animated","fadeIn","show");this.mainEl.classList.remove("fadeOut");this.inputEl.focus();nextTick(function(){_this.inputEl.setSelectionRange(0,_this.inputEl.value.length);_this.showing=true});this.search()}},{key:"closeWindow",value:function closeWindow(){var _this=this;if(!this.showing)return;this.mainEl.classList.add("fadeOut");this.mainEl.classList.remove("fadeIn");this.inputEl.blur();this.showing=false;setTimeout(function(){_this.mainEl.classList.remove("show")},400)}}]);return AnatoloSearch}(Component);var config=null;function load(){return _load.apply(this,arguments)}function _load(){_load=_async_to_generator(function(){var retry,_config_valine,_config_gitment,_config_gitalk,id,git_ment,gitment,gitalk;var _arguments=arguments;return _ts_generator(this,function(_state){switch(_state.label){case 0:retry=_arguments.length>0&&_arguments[0]!==void 0?_arguments[0]:3;if(!config)return[2];return[4,Anatolo.getPageTitle()];case 1:id=_state.sent().slice(0,50);if(!id)return[2];if(((_config_valine=config.valine)===null||_config_valine===void 0?void 0:_config_valine.enable)&&window.Valine){new window.Valine({el:"#vcomments",notify:config.valine.notify||false,verify:config.valine.verify||false,app_id:config.valine.appid,app_key:config.valine.appkey,placeholder:config.valine.placeholder,path:window.location.pathname,serverURLs:config.valine.serverURLs,visitor:true,recordIP:true,avatar:config.valine.avatar})}if(((_config_gitment=config.gitment)===null||_config_gitment===void 0?void 0:_config_gitment.enable)&&window.Gitment){git_ment={id:id,owner:config.gitment.owner,repo:config.gitment.repo,oauth:{client_id:config.gitment.client_id,client_secret:config.gitment.client_secret}};if(config.gitment.id!="")git_ment.id=config.gitment.id;gitment=new window.Gitment(git_ment);gitment.render("gitment_container")}if(((_config_gitalk=config.gitalk)===null||_config_gitalk===void 0?void 0:_config_gitalk.enable)&&window.Gitalk){gitalk=new window.Gitalk({clientID:config.gitalk.client_id,clientSecret:config.gitalk.client_secret,repo:config.gitalk.repo,owner:config.gitalk.owner,admin:[config.gitalk.owner],id:id,distractionFreeMode:false});gitalk.render("gitalk_container")}return[2]}})});return _load.apply(this,arguments)}router.onPageChange(function(){return load().catch(function(){})});function setConfig(conf){config=conf}var comment=/*#__PURE__*/Object.freeze({__proto__:null,load:load,setConfig:setConfig});function getTheme(){var _document_querySelector_getAttribute;return(_document_querySelector_getAttribute=document.querySelector("html").getAttribute("theme"))!==null&&_document_querySelector_getAttribute!==void 0?_document_querySelector_getAttribute:"default"}function setTheme(){var theme=localStorage.getItem("theme");if(theme){document.querySelector("html").setAttribute("theme",theme)}}setTheme();function darkLightToggle(){var themeNow=getTheme();if(themeNow==="default"){themeNow=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"true"}if(themeNow==="dark"){localStorage.setItem("theme","light")}else{localStorage.setItem("theme","dark")}setTheme()}function getPageTitle(){return _getPageTitle.apply(this,arguments)}function _getPageTitle(){_getPageTitle=_async_to_generator(function(){var _this,_document_querySelector,_title,_ref;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,site.thisPage()];case 1:return[2,(_ref=(_title=(_this=_state.sent())===null||_this===void 0?void 0:_this.title)!==null&&_title!==void 0?_title:(_document_querySelector=document.querySelector("title"))===null||_document_querySelector===void 0?void 0:_document_querySelector.textContent)!==null&&_ref!==void 0?_ref:""]}})});return _getPageTitle.apply(this,arguments)}var Anatolo={comment:comment,site:site,search:new AnatoloSearch,getPageTitle:getPageTitle,share:{native:/*#__PURE__*/_async_to_generator(function(){var _,_1,_tmp;return _ts_generator(this,function(_state){switch(_state.label){case 0:_1=(_=window.navigator).share;_tmp={url:window.location.href};return[4,getPageTitle()];case 1:_tmp.text=_state.sent();return[4,getPageTitle()];case 2:_1.apply(_,[(_tmp.title=_state.sent(),_tmp)]);return[2]}})})},darkLightToggle:darkLightToggle};var FloatBtn=/*#__PURE__*/function(Component){_inherits(FloatBtn,Component);function FloatBtn(){_class_call_check(this,FloatBtn);return _call_super(this,FloatBtn,arguments)}_create_class(FloatBtn,[{key:"init",value:function init(){document.addEventListener("scroll",function(){var _document_querySelector,_document_querySelector1;if(window.scrollY<200)(_document_querySelector=document.querySelector("#scroll-to-top.float-button"))===null||_document_querySelector===void 0?void 0:_document_querySelector.classList.add("hide");else(_document_querySelector1=document.querySelector("#scroll-to-top.float-button"))===null||_document_querySelector1===void 0?void 0:_document_querySelector1.classList.remove("hide")})}}]);return FloatBtn}(Component);function withParent(n,fn){var p=n;if(p==null)return null;while(fn(p)!=true){p=p.parentElement;if(p==null)return null}return p}document.addEventListener("DOMContentLoaded",function(){document.addEventListener("click",function(e){if(withParent(e.target,function(n){return n===null||n===void 0?void 0:n.classList.contains("btn-toggle-more")})){var _document_querySelector;e.preventDefault();e.stopPropagation();(_document_querySelector=document.querySelector(".nav_right_btn"))===null||_document_querySelector===void 0?void 0:_document_querySelector.classList.add("expanded")}else{var _document_querySelector1;(_document_querySelector1=document.querySelector(".nav_right_btn"))===null||_document_querySelector1===void 0?void 0:_document_querySelector1.classList.remove("expanded")}})});window.Anatolo=Anatolo;window.Utils=Utils;new FloatBtn});
